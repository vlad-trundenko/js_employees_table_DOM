{"version":3,"sources":["scripts/main.js"],"names":["thead","document","querySelector","tbody","sortedColumn","filterStr","str","replace","addEventListener","e","index","children","indexOf","target","tableRow","reverse","sort","a","b","valueA","textContent","valueB","isFinite","localeCompare","append","i","length","classList","remove","closest","add","newEmployeesForm","createElement","fields","selectOptions","className","body","tag","field","type","newLabel","newTag","labelName","toUpperCase","slice","name","option","elements","office","insertAdjacentHTML","convertSalary","number","Number","toLocaleString","style","errorMassage","validateData","dataName","dataValue","trim","pushNotification","title","description","notification","preventDefault","data","FormData","fieldName","get","element","indexInputElement","fieldType","saveText","cellSelect","setAttribute","focus","selectedOption","blur","value","cellInput","enter","key"],"mappings":"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","file":"main.acf9c7df.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nconst thead = document.querySelector('thead');\r\nconst tbody = document.querySelector('tbody');\r\n\r\nlet sortedColumn = -1;\r\n\r\nconst filterStr = (str) => str.replace(/[^a-zA-Z0-9]/g, '');\r\n\r\nthead.addEventListener('click', (e) => {\r\n  const index = [...thead.children[0].children].indexOf(e.target);\r\n  const tableRow = [...tbody.children];\r\n\r\n  if (index === sortedColumn) {\r\n    tableRow.reverse();\r\n  } else {\r\n    tableRow.sort((a, b) => {\r\n      const valueA = a.children[index].textContent;\r\n      const valueB = b.children[index].textContent;\r\n\r\n      return isFinite(filterStr(valueA))\r\n        ? filterStr(valueA) - filterStr(valueB)\r\n        : valueA.localeCompare(valueB);\r\n    });\r\n\r\n    sortedColumn = index;\r\n  }\r\n\r\n  tbody.append(...tableRow);\r\n});\r\n\r\ntbody.addEventListener('click', e => {\r\n  for (let i = 0; i < tbody.children.length; i++) {\r\n    const element = tbody.children[i];\r\n\r\n    element.classList.remove('active');\r\n  }\r\n\r\n  e.target.closest('tr').classList.add('active');\r\n});\r\n\r\nconst newEmployeesForm = document.createElement('form');\r\nconst fields = [\r\n  ['input', 'name', 'text'],\r\n  ['input', 'position', 'text'],\r\n  ['select', 'office', null],\r\n  ['input', 'age', 'number'],\r\n  ['input', 'salary', 'number'],\r\n];\r\nconst selectOptions = [\r\n  'Tokyo',\r\n  'Singapore',\r\n  'London',\r\n  'New York',\r\n  'Edinburgh',\r\n  'San Francisco',\r\n];\r\n\r\nnewEmployeesForm.className = 'new-employee-form';\r\ndocument.body.append(newEmployeesForm);\r\n\r\nfor (const [tag, field, type] of fields) {\r\n  const newLabel = document.createElement('label');\r\n  const newTag = document.createElement(tag);\r\n  const labelName = field[0].toUpperCase() + field.slice(1);\r\n\r\n  newLabel.textContent = labelName;\r\n  newEmployeesForm.append(newLabel);\r\n  newTag.name = field;\r\n\r\n  if (type) {\r\n    newTag.type = type;\r\n  }\r\n\r\n  newLabel.append(newTag);\r\n}\r\n\r\nfor (const option of selectOptions) {\r\n  newEmployeesForm.elements.office.insertAdjacentHTML('afterbegin', `\r\n    <option>${option}</option>\r\n  `);\r\n}\r\n\r\nnewEmployeesForm.insertAdjacentHTML('beforeend', `\r\n    <button type=\"submit\">Save to table</button>\r\n`);\r\n\r\nconst convertSalary = (number) => {\r\n  return '$' + Number(number).toLocaleString(\r\n    'en-US',\r\n    {\r\n      style: 'decimal',\r\n    }\r\n  );\r\n};\r\n\r\nconst errorMassage = {\r\n  'name': 'Name value has less than 4 letters',\r\n  'position': 'Position value has less than 4 letters',\r\n  'age': 'Age value is less than 18 or more than 90',\r\n  'salary': 'Salary value must be more than 10,000',\r\n};\r\n\r\nfunction validateData(dataName, dataValue) {\r\n  switch (dataName) {\r\n    case 'name':\r\n    case 'position':\r\n      return dataValue.trim().length < 4;\r\n    case 'age':\r\n      return +dataValue < 18 || +dataValue > 90;\r\n    case 'salary':\r\n      return +dataValue < 10000;\r\n  }\r\n}\r\n\r\nconst pushNotification = (title, description, type) => {\r\n  const notification = document.querySelector('.notification');\r\n\r\n  if (notification) {\r\n    notification.remove();\r\n  }\r\n\r\n  document.body.insertAdjacentHTML('beforeend', `\r\n    <div class=\"notification ${type}\">\r\n      <h2 class=\"title\">${title}</h2>\r\n      <p>${description}</p>\r\n    </div>\r\n  `);\r\n};\r\n\r\nnewEmployeesForm.addEventListener('submit', (e) => {\r\n  e.preventDefault();\r\n\r\n  const data = new FormData(newEmployeesForm);\r\n\r\n  for (const [ , fieldName, , ] of fields) {\r\n    if (validateData(fieldName, data.get(fieldName))) {\r\n      pushNotification(\r\n        'Input error',\r\n        errorMassage[fieldName],\r\n        'error'\r\n      );\r\n\r\n      return;\r\n    }\r\n  }\r\n\r\n  tbody.insertAdjacentHTML('beforeend', `\r\n    <tr>\r\n      <td>${data.get('name')}</td>\r\n      <td>${data.get('position')}</td>\r\n      <td>${data.get('office')}</td>\r\n      <td>${data.get('age')}</td>\r\n      <td>${convertSalary(data.get('salary'))}</td>\r\n    </tr>`\r\n  );\r\n\r\n  pushNotification(\r\n    'Success',\r\n    'A new employee has been added',\r\n    'success'\r\n  );\r\n});\r\n\r\ntbody.addEventListener('dblclick', e => {\r\n  const element = e.target;\r\n  const indexInputElement\r\n    = [...element.closest('tr').children].indexOf(element.closest('td'));\r\n  const fieldType = fields[indexInputElement][2];\r\n  const fieldName = fields[indexInputElement][1];\r\n  const saveText = element.closest('td').textContent;\r\n\r\n  e.target.closest('td').textContent = '';\r\n\r\n  if (fieldName === 'office') {\r\n    const cellSelect = document.createElement('select');\r\n\r\n    cellSelect.className = 'cell-input';\r\n    cellSelect.setAttribute('name', fieldName);\r\n    e.target.closest('td').append(cellSelect);\r\n    cellSelect.focus();\r\n\r\n    for (const option of selectOptions) {\r\n      const selectedOption = saveText === option ? 'selected' : null;\r\n\r\n      cellSelect.insertAdjacentHTML('afterbegin', `\r\n        <option ${selectedOption}>${option}</option>\r\n      `);\r\n    }\r\n\r\n    cellSelect.addEventListener('change', () => {\r\n      cellSelect.blur();\r\n      e.target.closest('td').textContent = cellSelect.value;\r\n    });\r\n\r\n    cellSelect.addEventListener('blur', () => {\r\n      e.target.closest('td').textContent = cellSelect.value;\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  const cellInput = document.createElement('input');\r\n\r\n  cellInput.className = 'cell-input';\r\n  cellInput.setAttribute('type', fieldType);\r\n  cellInput.setAttribute('name', fieldName);\r\n  e.target.closest('td').append(cellInput);\r\n  cellInput.focus();\r\n\r\n  cellInput.addEventListener('keypress', enter => {\r\n    if (enter.key === 'Enter') {\r\n      cellInput.blur();\r\n    }\r\n  });\r\n\r\n  cellInput.addEventListener('blur', () => {\r\n    if (validateData(fieldName, cellInput.value)) {\r\n      e.target.closest('td').textContent = saveText;\r\n\r\n      pushNotification(\r\n        'Input error',\r\n        errorMassage[fieldName],\r\n        'error'\r\n      );\r\n    } else {\r\n      if (fieldName === 'salary') {\r\n        e.target.closest('td').textContent = convertSalary(cellInput.value);\r\n\r\n        return;\r\n      }\r\n\r\n      e.target.closest('td').textContent = cellInput.value;\r\n    }\r\n  });\r\n});\r\n"]}